<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample wok project</title>
<script id="wok-generated">
            class mycomp_wok extends HTMLElement {
                styleTemplate;
                divTemplate;
                shadow;

                
        get _x() {
                return this.getAttribute('_x');
        }
            set _x(value) {
                this.setAttribute('_x', value);
            }
        get _y() {
                
        if(this.getAttribute('_y') == null) {this.setAttribute('_y',  10 * this._x);}
        return this.getAttribute('_y');
        }
            set _y(value) {
                this.setAttribute('_y', value);
            }
        get _z() {
                
        if(this.getAttribute('_z') == null) {this.setAttribute('_z',  Math.sqrt(this._y));}
        return this.getAttribute('_z');
        }
            set _z(value) {
                this.setAttribute('_z', value);
            }
        get _color() {
                
        if(this.getAttribute('_color') == null) {this.setAttribute('_color',  'green');}
        return this.getAttribute('_color');
        }
            set _color(value) {
                this.setAttribute('_color', value);
            }

                constructor() {
                    super();
                    this.shadow = this.attachShadow({mode: 'open'});
                    
                }

                render() {   
                    this.styleTemplate =`<style>
    h1 {
        color: ${this._color};
    };
    
</style>`;
                    this.divTemplate =`
    <h1>wok.js</h1>
    <lu>
        <li>${this._x}</li>
        <li>${this._y}</li>
        <li>${this._z}</li>
        <li>${this._x + this._y / this._z}</li>
    </lu>
`;
                    this.shadow.innerHTML = this.styleTemplate + this.divTemplate;
                }

                /* gets called when an attribute is changed */
                mutationObserverCallback(mutationList, observer) {
                    for (const mutation of mutationList) {
                        if (mutation.type === 'attributes' 
                        && mutation.attributeName.startsWith('_')
                        && mutation.oldValue !== mutation.target.getAttribute(mutation.attributeName)) {
                            this.render();
                        }
                    }
                }

                /* gets called when the element is added to the DOM */
                connectedCallback() {   
                    this.mutationObserver = new MutationObserver(this.mutationObserverCallback.bind(this));
                    this.mutationObserver.observe(this, { attributes: true, attributeOldValue : true });
                    this.render();
                }

                /* gets called when the element is removed from the DOM */
                disconnectedCallback() {
                    this.mutationObserver.disconnect();
                }

                

            }

            customElements.define('mycomp-wok', mycomp_wok);</script></head>

    <body>
        
        <mycomp-wok _x="10" _color="blue">

    

</mycomp-wok></body></html>